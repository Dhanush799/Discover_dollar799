{"ast":null,"code":"var _jsxFileName = \"/home/workspace/reactjs/coding-practices/nxtTrendzSpecificProductDetails-solution/src/components/AllProductsSection/index.js\";\nimport { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport Cookies from 'js-cookie';\nimport FiltersGroup from '../FilterGroup';\nimport ProductCard from '../ProductCard';\nimport ProductsHeader from '../ProductsHeader';\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst sortbyOptions = [{\n  optionId: 'PRICE_HIGH',\n  displayText: 'Price (High-Low)'\n}, {\n  optionId: 'PRICE_LOW',\n  displayText: 'Price (Low-High)'\n}];\nconst apiStatusConstants = {\n  initial: 'INITIAL',\n  success: 'SUCCESS',\n  failure: 'FAILURE',\n  inProgress: 'IN_PROGRESS'\n};\nclass AllProductsSection extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      productsList: [],\n      apiStatus: apiStatusConstants.initial,\n      activeOptionId: sortbyOptions[0].optionId,\n      searchInput: ''\n    };\n    this.getProducts = async () => {\n      this.setState({\n        apiStatus: apiStatusConstants.inProgress\n      });\n      const jwtToken = Cookies.get('jwt_token');\n      const {\n        activeOptionId,\n        searchInput\n      } = this.state;\n      const apiUrl = `https://apis.ccbp.in/products?sort_by=${activeOptionId}&title_search=${searchInput}`;\n      const options = {\n        headers: {\n          Authorization: `Bearer ${jwtToken}`\n        },\n        method: 'GET'\n      };\n      const response = await fetch(apiUrl, options);\n      if (response.ok) {\n        const fetchedData = await response.json();\n        const updatedData = fetchedData.products.map(product => ({\n          title: product.title,\n          brand: product.brand,\n          price: product.price,\n          id: product.id,\n          imageUrl: product.image_url,\n          rating: product.rating\n        }));\n        this.setState({\n          productsList: updatedData,\n          apiStatus: apiStatusConstants.success\n        });\n      } else {\n        this.setState({\n          apiStatus: apiStatusConstants.failure\n        });\n      }\n    };\n    this.changeSortby = activeOptionId => {\n      this.setState({\n        activeOptionId\n      }, this.getProducts);\n    };\n    this.clearFilters = () => {\n      this.setState({\n        searchInput: ''\n      }, this.getProducts);\n    };\n    this.enterSearchInput = () => {\n      this.getProducts();\n    };\n    this.changeSearchInput = searchInput => {\n      this.setState({\n        searchInput\n      });\n    };\n    this.renderFailureView = () => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"products-error-view-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"https://assets.ccbp.in/frontend/react-js/nxt-trendz/nxt-trendz-products-error-view.png\",\n        alt: \"products failure\",\n        className: \"products-failure-img\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"product-failure-heading-text\",\n        children: \"Oops! Something Went Wrong\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"products-failure-description\",\n        children: \"We are having some trouble processing your request. Please try again.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }, this);\n    this.renderProductsListView = () => {\n      const {\n        productsList,\n        activeOptionId\n      } = this.state;\n      const shouldShowProductsList = productsList.length > 0;\n      return shouldShowProductsList ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"all-products-container\",\n        children: [/*#__PURE__*/_jsxDEV(ProductsHeader, {\n          activeOptionId: activeOptionId,\n          sortbyOptions: sortbyOptions,\n          changeSortby: this.changeSortby\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"products-list\",\n          children: productsList.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n            productData: product\n          }, product.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 7\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-products-view\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://assets.ccbp.in/frontend/react-js/nxt-trendz/nxt-trendz-no-products-view.png\",\n          className: \"no-products-img\",\n          alt: \"no products\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"no-products-heading\",\n          children: \"No Products Found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"no-products-description\",\n          children: \"We could not find any products. Try other filters.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 7\n      }, this);\n    };\n    this.renderLoadingView = () => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"products-loader-container\",\n      children: /*#__PURE__*/_jsxDEV(Loader, {\n        type: \"ThreeDots\",\n        color: \"#0b69ff\",\n        height: \"50\",\n        width: \"50\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 5\n    }, this);\n    this.renderAllProducts = () => {\n      const {\n        apiStatus\n      } = this.state;\n      switch (apiStatus) {\n        case apiStatusConstants.success:\n          return this.renderProductsListView();\n        case apiStatusConstants.failure:\n          return this.renderFailureView();\n        case apiStatusConstants.inProgress:\n          return this.renderLoadingView();\n        default:\n          return null;\n      }\n    };\n  }\n  componentDidMount() {\n    this.getProducts();\n  }\n  render() {\n    const {\n      searchInput\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"all-products-section\",\n      children: [/*#__PURE__*/_jsxDEV(FiltersGroup, {\n        searchInput: searchInput,\n        changeSearchInput: this.changeSearchInput,\n        enterSearchInput: this.enterSearchInput,\n        clearFilters: this.clearFilters\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this), this.renderAllProducts()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default AllProductsSection;","map":{"version":3,"names":["Component","Loader","Cookies","FiltersGroup","ProductCard","ProductsHeader","sortbyOptions","optionId","displayText","apiStatusConstants","initial","success","failure","inProgress","AllProductsSection","state","productsList","apiStatus","activeOptionId","searchInput","getProducts","setState","jwtToken","get","apiUrl","options","headers","Authorization","method","response","fetch","ok","fetchedData","json","updatedData","products","map","product","title","brand","price","id","imageUrl","image_url","rating","changeSortby","clearFilters","enterSearchInput","changeSearchInput","renderFailureView","renderProductsListView","shouldShowProductsList","length","renderLoadingView","renderAllProducts","componentDidMount","render"],"sources":["/home/workspace/reactjs/coding-practices/nxtTrendzSpecificProductDetails-solution/src/components/AllProductsSection/index.js"],"sourcesContent":["import {Component} from 'react'\nimport Loader from 'react-loader-spinner'\nimport Cookies from 'js-cookie'\n\nimport FiltersGroup from '../FilterGroup'\nimport ProductCard from '../ProductCard'\nimport ProductsHeader from '../ProductsHeader'\n\nimport './index.css'\n\nconst sortbyOptions = [\n  {\n    optionId: 'PRICE_HIGH',\n    displayText: 'Price (High-Low)',\n  },\n  {\n    optionId: 'PRICE_LOW',\n    displayText: 'Price (Low-High)',\n  },\n]\n\nconst apiStatusConstants = {\n  initial: 'INITIAL',\n  success: 'SUCCESS',\n  failure: 'FAILURE',\n  inProgress: 'IN_PROGRESS',\n}\n\nclass AllProductsSection extends Component {\n  state = {\n    productsList: [],\n    apiStatus: apiStatusConstants.initial,\n    activeOptionId: sortbyOptions[0].optionId,\n    searchInput: '',\n  }\n\n  componentDidMount() {\n    this.getProducts()\n  }\n\n  getProducts = async () => {\n    this.setState({\n      apiStatus: apiStatusConstants.inProgress,\n    })\n    const jwtToken = Cookies.get('jwt_token')\n    const {activeOptionId, searchInput} = this.state\n    const apiUrl = `https://apis.ccbp.in/products?sort_by=${activeOptionId}&title_search=${searchInput}`\n    const options = {\n      headers: {\n        Authorization: `Bearer ${jwtToken}`,\n      },\n      method: 'GET',\n    }\n    const response = await fetch(apiUrl, options)\n    if (response.ok) {\n      const fetchedData = await response.json()\n      const updatedData = fetchedData.products.map(product => ({\n        title: product.title,\n        brand: product.brand,\n        price: product.price,\n        id: product.id,\n        imageUrl: product.image_url,\n        rating: product.rating,\n      }))\n      this.setState({\n        productsList: updatedData,\n        apiStatus: apiStatusConstants.success,\n      })\n    } else {\n      this.setState({\n        apiStatus: apiStatusConstants.failure,\n      })\n    }\n  }\n\n  changeSortby = activeOptionId => {\n    this.setState({activeOptionId}, this.getProducts)\n  }\n\n  clearFilters = () => {\n    this.setState(\n      {\n        searchInput: '',\n      },\n      this.getProducts,\n    )\n  }\n\n  enterSearchInput = () => {\n    this.getProducts()\n  }\n\n  changeSearchInput = searchInput => {\n    this.setState({searchInput})\n  }\n\n  renderFailureView = () => (\n    <div className=\"products-error-view-container\">\n      <img\n        src=\"https://assets.ccbp.in/frontend/react-js/nxt-trendz/nxt-trendz-products-error-view.png\"\n        alt=\"products failure\"\n        className=\"products-failure-img\"\n      />\n      <h1 className=\"product-failure-heading-text\">\n        Oops! Something Went Wrong\n      </h1>\n      <p className=\"products-failure-description\">\n        We are having some trouble processing your request. Please try again.\n      </p>\n    </div>\n  )\n\n  renderProductsListView = () => {\n    const {productsList, activeOptionId} = this.state\n    const shouldShowProductsList = productsList.length > 0\n\n    return shouldShowProductsList ? (\n      <div className=\"all-products-container\">\n        <ProductsHeader\n          activeOptionId={activeOptionId}\n          sortbyOptions={sortbyOptions}\n          changeSortby={this.changeSortby}\n        />\n        <ul className=\"products-list\">\n          {productsList.map(product => (\n            <ProductCard productData={product} key={product.id} />\n          ))}\n        </ul>\n      </div>\n    ) : (\n      <div className=\"no-products-view\">\n        <img\n          src=\"https://assets.ccbp.in/frontend/react-js/nxt-trendz/nxt-trendz-no-products-view.png\"\n          className=\"no-products-img\"\n          alt=\"no products\"\n        />\n        <h1 className=\"no-products-heading\">No Products Found</h1>\n        <p className=\"no-products-description\">\n          We could not find any products. Try other filters.\n        </p>\n      </div>\n    )\n  }\n\n  renderLoadingView = () => (\n    <div className=\"products-loader-container\">\n      <Loader type=\"ThreeDots\" color=\"#0b69ff\" height=\"50\" width=\"50\" />\n    </div>\n  )\n\n  renderAllProducts = () => {\n    const {apiStatus} = this.state\n\n    switch (apiStatus) {\n      case apiStatusConstants.success:\n        return this.renderProductsListView()\n      case apiStatusConstants.failure:\n        return this.renderFailureView()\n      case apiStatusConstants.inProgress:\n        return this.renderLoadingView()\n      default:\n        return null\n    }\n  }\n\n  render() {\n    const {searchInput} = this.state\n\n    return (\n      <div className=\"all-products-section\">\n        <FiltersGroup\n          searchInput={searchInput}\n          changeSearchInput={this.changeSearchInput}\n          enterSearchInput={this.enterSearchInput}\n          clearFilters={this.clearFilters}\n        />\n        {this.renderAllProducts()}\n      </div>\n    )\n  }\n}\n\nexport default AllProductsSection\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}